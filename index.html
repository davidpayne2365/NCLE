<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCLE Exam Prep</title>
    <style>
        :root {--primary:#3498db; --secondary:#2ecc71; --dark:#2c3e50; --light:#ecf0f1; --accent:#e74c3c; --text:#333; --bg:#f9f9f9;}
        * {margin:0; padding:0; box-sizing:border-box; font-family:sans-serif;}
        body {background:var(--bg); color:var(--text); line-height:1.6; padding-bottom:20px;}
        header {background:var(--primary); color:white; text-align:center; padding:1rem; position:sticky; top:0; z-index:100;}
        nav {background:var(--dark); display:flex; justify-content:space-around; padding:0.5rem; position:sticky; top:60px; z-index:99;}
        nav button {background:transparent; border:none; color:white; padding:0.5rem; cursor:pointer;}
        nav button.active {background:var(--primary); border-radius:4px;}
        .container {max-width:800px; margin:0 auto; padding:1rem;}
        .section {display:none; background:white; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.05); padding:1.5rem; margin-bottom:1.5rem;}
        .section.active {display:block;}
        h2 {color:var(--primary); margin-bottom:1rem; border-bottom:2px solid var(--light); padding-bottom:0.5rem;}
        h3 {color:var(--dark); margin:1.5rem 0 0.75rem;}
        p {margin-bottom:1rem;}
        .box {padding:1rem; margin:1rem 0; border-radius:0 4px 4px 0;}
        .formula-box {background:var(--light); border-left:4px solid var(--primary);}
        .tip-box {background:#e8f4fd; border-left:4px solid var(--secondary);}
        .warning-box {background:#fdecea; border-left:4px solid var(--accent);}
        .question {display:none; background:white; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.05); padding:1.5rem; margin-bottom:1.5rem;}
        .question.active {display:block;}
        .option {background:var(--light); border:1px solid #ddd; border-radius:4px; padding:0.75rem; margin-bottom:0.5rem; cursor:pointer;}
        .option:hover {background:#e3e3e3;}
        .option.selected {background:var(--primary); color:white;}
        .option.correct {background:var(--secondary); color:white;}
        .option.incorrect {background:var(--accent); color:white;}
        .feedback {margin-top:1rem; display:none; padding:1rem; border-radius:4px;}
        .feedback.correct {background:#d4edda; color:#155724; display:block;}
        .feedback.incorrect {background:#f8d7da; color:#721c24; display:block;}
        .quiz-nav {display:flex; justify-content:space-between; margin-top:1rem;}
        .btn {background:var(--primary); color:white; border:none; padding:0.75rem 1.5rem; border-radius:4px; cursor:pointer;}
        .btn:hover {background:#2980b9;}
        .btn:disabled {background:#bdc3c7; cursor:not-allowed;}
        .progress-container {width:100%; background:var(--light); border-radius:10px; margin:1rem 0;}
        .progress-bar {height:10px; background:var(--secondary); border-radius:10px; width:0%;}
        table {width:100%; border-collapse:collapse; margin:1rem 0;}
        table, th, td {border:1px solid #ddd;}
        th, td {padding:0.75rem; text-align:left;}
        th {background:var(--primary); color:white;}
        tr:nth-child(even) {background:var(--light);}
        @media (max-width:768px) {nav {flex-wrap:wrap;} nav button {flex:1 0 auto; font-size:0.8rem; padding:0.5rem 0.25rem;}}
    </style>
</head>
<body>
    <header>
        <h1>NCLE Exam Prep</h1>
        <p>Master Contact Lens Mathematics</p>
    </header>
    
    <nav>
        <button id="btn-intro" class="nav-btn active">Intro</button>
        <button id="btn-cylinder" class="nav-btn">Cylinder Form</button>
        <button id="btn-vertex" class="nav-btn">Vertex Distance</button>
        <button id="btn-k-reading" class="nav-btn">K Readings</button>
        <button id="btn-quiz" class="nav-btn">Quiz</button>
        <button id="btn-resources" class="nav-btn">Resources</button>

<script>
// Add the Resources section to your container
document.addEventListener('DOMContentLoaded', function() {
    // Create the resources section
    const resourcesSection = document.createElement('div');
    resourcesSection.id = 'section-resources';
    resourcesSection.className = 'section';
    resourcesSection.innerHTML = `
        <h2>Contact Lens Fitting Resources</h2>
        <p>Additional guides and references to help you prepare for your NCLE exam.</p>
        
        <div class="resources-container">
            <div class="resource-card">
                <h3>GP Fitting Guide</h3>
                <p>Comprehensive guide to gas permeable lens fitting including SAM/FAP principles.</p>
                <a href="gp-fitting-guide.html" class="resource-link">View Guide</a>
            </div>
            
            <div class="resource-card">
                <h3>More Resources Coming Soon</h3>
                <p>Additional study materials are being developed.</p>
            </div>
        </div>
    `;
    
    // Add the section to the container
    document.querySelector('.container').appendChild(resourcesSection);
    
    // Add CSS styles for resources
    const styleElement = document.createElement('style');
    styleElement.textContent = `
        .resources-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .resource-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
            flex: 1 0 250px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .resource-link {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            margin-top: 10px;
            transition: background 0.2s;
        }
        
        .resource-link:hover {
            background: #2980b9;
        }
    `;
    document.head.appendChild(styleElement);
    
    // Add event listener for the resources button
    document.getElementById('btn-resources').addEventListener('click', () => {
        document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
        document.getElementById('section-resources').classList.add('active');
        
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById('btn-resources').classList.add('active');
    });
});
</script>
    </nav>
    
    <div class="container">
        <!-- Introduction Section -->
        <div id="section-intro" class="section active">
            <h2>Introduction to NCLE Mathematics</h2>
            <p>Welcome to the NCLE Exam Prep application! This tool will help you understand and master the mathematical concepts required for the National Contact Lens Exam.</p>
            
            <p>The NCLE exam tests your knowledge of contact lens fitting, including:</p>
            <ul>
                <li>Understanding and converting between minus and plus cylinder forms</li>
                <li>Compensating for vertex distance</li>
                <li>Interpreting keratometry (K) readings</li>
                <li>Determining the appropriate contact lens parameters</li>
                <li>Understanding different types of astigmatism</li>
            </ul>
            
            <div class="tip-box box">
                <h3>Study Tip</h3>
                <p>For the NCLE exam, practice is key. Work through as many example problems as possible to build your confidence and speed.</p>
            </div>
        </div>
        
        <!-- Cylinder Form Section -->
        <div id="section-cylinder" class="section">
            <h2>Cylinder Form Conversion</h2>
            <p>Contact lenses are always fit in minus cylinder form. If you encounter a prescription in plus cylinder form, you must transpose it to minus cylinder form.</p>
            
            <h3>Transposition Steps</h3>
            <ol>
                <li>Add the sphere and cylinder powers algebraically</li>
                <li>Change the sign of the cylinder</li>
                <li>Change the axis by 90 degrees (add or subtract 90)</li>
            </ol>
            
            <div class="formula-box box">
                <strong>Plus to Minus Cylinder Conversion Formula:</strong><br>
                New Sphere = Old Sphere + Old Cylinder<br>
                New Cylinder = -Old Cylinder<br>
                New Axis = Old Axis ± 90°
            </div>
            
            <h3>Example</h3>
            <p>Convert +1.75 +2.00 x 45 to minus cylinder form.</p>
            
            <div class="tip-box box">
                <p>Step 1: New Sphere = +1.75 + (+2.00) = +3.75</p>
                <p>Step 2: New Cylinder = -(+2.00) = -2.00</p>
                <p>Step 3: New Axis = 45 + 90 = 135</p>
                <p>Result: +3.75 -2.00 x 135</p>
            </div>
        </div>
        
        <!-- Vertex Distance Section -->
        <div id="section-vertex" class="section">
            <h2>Vertex Distance Compensation</h2>
            <p>When the power of a lens exceeds ±4.00 diopters, you need to compensate for vertex distance when fitting contact lenses.</p>
            
            <div class="formula-box box">
                <strong>Vertex Distance Compensation Formula:</strong><br>
                Fc = F / (1 - d × F)<br>
                Where:<br>
                Fc = Contact lens power<br>
                F = Spectacle lens power (in diopters)<br>
                d = Vertex distance (in meters, typically 0.012 or 0.014)
            </div>
            
            <h3>Quick Rules of Thumb</h3>
            <ul>
                <li>Around 5 diopters: Compensate by about 0.25D</li>
                <li>Around 8 diopters: Compensate by about 0.50D</li>
                <li>Around 10 diopters: Compensate by about 1.00D</li>
            </ul>
            
            <p>All contact lens prescriptions when compensated for vertex distance become:</p>
            <ul>
                <li>Less minus power (or more plus power)</li>
                <li>This is because the lens is moving closer to the eye</li>
            </ul>
        </div>
        
        <!-- K Reading Section -->
        <div id="section-k-reading" class="section">
            <h2>K Readings & Astigmatism</h2>
            <p>Keratometry (K) readings measure the corneal curvature and reveal the dioptric power of the cornea in its steepest and flattest meridians.</p>
            
            <h3>Types of Astigmatism</h3>
            <div style="overflow-x: auto;">
                <table>
                    <tr>
                        <th>Type</th>
                        <th>Description</th>
                        <th>K Reading Example</th>
                    </tr>
                    <tr>
                        <td>With-the-Rule (WTR)</td>
                        <td>Steeper in the vertical meridian (±30° of 90°)</td>
                        <td>43.00@180 / 44.25@90</td>
                    </tr>
                    <tr>
                        <td>Against-the-Rule (ATR)</td>
                        <td>Steeper in the horizontal meridian (±30° of 180°)</td>
                        <td>44.25@180 / 43.00@90</td>
                    </tr>
                    <tr>
                        <td>Oblique</td>
                        <td>Steepest meridian between the zones defined by WTR and ATR</td>
                        <td>43.00@45 / 44.25@135</td>
                    </tr>
                </table>
            </div>
            
            <h3>Fitting Philosophies: SAM & FAP</h3>
            <div class="formula-box box">
                <strong>SAM = Steeper Add Minus</strong><br>
                When fitting steeper than K, add minus power to the final lens power.
                <br><br>
                <strong>FAP = Flatter Add Plus</strong><br>
                When fitting flatter than K, add plus power to the final lens power.
            </div>
        </div>
        
        <!-- Quiz Section -->
        <div id="section-quiz" class="section">
            <h2>Practice Quiz</h2>
            <p>Test your understanding of contact lens mathematics with these multiple-choice questions.</p>
            
            <div class="progress-container">
                <div id="quiz-progress" class="progress-bar"></div>
            </div>
            
            <div id="score-display" class="score-display">Question 1 of 10</div>
            
            <div id="quiz-container" class="quiz-container"></div>
            
            <div class="quiz-nav">
                <button id="prev-btn" class="btn" disabled>Previous</button>
                <button id="check-btn" class="btn">Check Answer</button>
                <button id="next-btn" class="btn" disabled>Next</button>
            </div>
            
            <div id="quiz-results" style="display: none;">
                <h3>Quiz Results</h3>
                <p>You scored <span id="final-score">0</span> out of <span id="total-questions">0</span> questions correctly.</p>
                <p id="quiz-feedback"></p>
                <button id="retry-btn" class="btn">Retry Quiz</button>
            </div>
        </div>
    </div>

    <!-- ADD NEW QUESTIONS HERE -->
    <script>
    // Quiz data - ADD MORE QUESTIONS HERE
    const quizData = [
        {
            question: "Convert the following prescription to minus cylinder form: +2.25 +1.50 x 75",
            options: [
                {text: "+3.75 -1.50 x 165", value: "a"},
                {text: "+3.75 -1.50 x 75", value: "b"},
                {text: "+0.75 -1.50 x 165", value: "c"},
                {text: "+2.25 -1.50 x 165", value: "d"}
            ],
            correctAnswer: "a",
            explanation: "To convert to minus cylinder: +2.25 + (+1.50) = +3.75 sphere, -1.50 cylinder, and the axis changes by 90° (75 + 90 = 165)."
        },
        {
            question: "A patient has a spectacle prescription of -5.75 -1.00 x 180. What would be the compensated contact lens prescription, assuming a 12mm vertex distance?",
            options: [
                {text: "-5.75 -1.00 x 180 (no change needed)", value: "a"},
                {text: "-5.50 -1.00 x 180", value: "b"},
                {text: "-5.25 -0.75 x 180", value: "c"},
                {text: "-6.00 -1.00 x 180", value: "d"}
            ],
            correctAnswer: "c",
            explanation: "For -5.75 -1.00 x 180, check both meridians: At 180° is -5.75D, and at 90° is -6.75D. Both exceed 4D, so compensation is needed. Using the rules of thumb, the compensated prescription is approximately -5.25 -0.75 x 180."
        },
        {
            question: "A patient has K readings of 43.50@180 / 45.00@90 and a refraction of -2.75 -1.50 x 180. What type of astigmatism does this patient have?",
            options: [
                {text: "With-the-rule corneal astigmatism", value: "a"},
                {text: "Against-the-rule corneal astigmatism", value: "b"},
                {text: "With-the-rule lenticular astigmatism", value: "c"},
                {text: "Mixed astigmatism (both corneal and lenticular)", value: "d"}
            ],
            correctAnswer: "a",
            explanation: "The K readings show a steeper vertical meridian (45.00 at 90°) than horizontal (43.50 at 180°), which is with-the-rule astigmatism. The difference (1.50D) matches the refractive cylinder, indicating purely corneal astigmatism."
        },
        {
            question: "You decide to fit a spherical GP lens 0.50D steeper than K for a patient with a compensated prescription of -3.75D. What should the final lens power be?",
            options: [
                {text: "-3.25D", value: "a"},
                {text: "-3.75D", value: "b"},
                {text: "-4.25D", value: "c"},
                {text: "-4.00D", value: "d"}
            ],
            correctAnswer: "c",
            explanation: "Using SAM (Steeper Add Minus): When fitting 0.50D steeper than K with -3.75D, add 0.50D of minus power: -3.75 - 0.50 = -4.25D."
        },
        {
            question: "A patient has K readings of 42.00@180 / 42.50@90 and a refraction of -1.75 -1.00 x 180. Which lens would be most appropriate?",
            options: [
                {text: "Spherical soft lens", value: "a"},
                {text: "Toric soft lens", value: "b"},
                {text: "Spherical GP lens", value: "c"},
                {text: "Front-toric GP lens", value: "d"}
            ],
            correctAnswer: "b",
            explanation: "The patient has 0.50D of corneal astigmatism (42.00 to 42.50) but 1.00D of refractive astigmatism. With soft lenses, all astigmatism must be corrected with a toric design when it's ≥0.75D."
        },
        {
            question: "Convert the following prescription to minus cylinder form: -3.00 +2.00 x 30",
            options: [
                {text: "-1.00 -2.00 x 120", value: "a"},
                {text: "-5.00 -2.00 x 120", value: "b"},
                {text: "-1.00 -2.00 x 30", value: "c"},
                {text: "-3.00 -2.00 x 120", value: "d"}
            ],
            correctAnswer: "a",
            explanation: "To convert to minus cylinder: -3.00 + (+2.00) = -1.00 sphere, -2.00 cylinder, and the axis changes by 90° (30 + 90 = 120)."
        },
        {
            question: "A patient has a prescription of -7.00 -1.50 x 90. What would be the compensated contact lens prescription, assuming a 12mm vertex distance?",
            options: [
                {text: "-6.50 -1.50 x 90", value: "a"},
                {text: "-6.50 -1.25 x 90", value: "b"},
                {text: "-7.00 -1.25 x 90", value: "c"},
                {text: "-6.75 -1.00 x 90", value: "d"}
            ],
            correctAnswer: "b",
            explanation: "For -7.00 -1.50 x 90, both meridians exceed 4D: -7.00D at 180° and -8.50D at 90°. The compensated prescription is approximately -6.50 -1.25 x 90."
        },
        {
            question: "A patient has K readings of 44.00@175 / 46.00@85 and a refraction of -2.00 -2.00 x 175. What type of astigmatism does this patient have?",
            options: [
                {text: "With-the-rule corneal astigmatism", value: "a"},
                {text: "Against-the-rule corneal astigmatism", value: "b"},
                {text: "Oblique corneal astigmatism", value: "c"},
                {text: "With-the-rule lenticular astigmatism", value: "d"}
            ],
            correctAnswer: "a",
            explanation: "The K readings show a steeper vertical meridian (46.00 at 85°) than horizontal (44.00 at 175°), which is with-the-rule astigmatism. The difference (2.00D) matches the refractive cylinder, indicating purely corneal astigmatism."
        },
        {
            question: "You are fitting a GP lens 0.75D flatter than K. Your patient's compensated prescription is -2.50D. What should the final lens power be?",
            options: [
                {text: "-3.25D", value: "a"},
                {text: "-2.50D", value: "b"},
                {text: "-1.75D", value: "c"},
                {text: "-3.00D", value: "d"}
            ],
            correctAnswer: "c",
            explanation: "Using FAP (Flatter Add Plus): When fitting 0.75D flatter than K with -2.50D, add 0.75D of plus power: -2.50 + 0.75 = -1.75D."
        },
        {
            question: "A patient has a prescription of -3.50 -1.25 x 180 and K readings of 43.00@180 / 44.25@90. Which of the following statements is correct?",
            options: [
                {text: "The patient has with-the-rule corneal astigmatism only", value: "a"},
                {text: "The patient has against-the-rule corneal astigmatism only", value: "b"},
                {text: "The patient has both corneal and lenticular astigmatism", value: "c"},
                {text: "The patient has no astigmatism", value: "d"}
            ],
            correctAnswer: "a",
            explanation: "The K readings show a steeper vertical meridian (44.25 at 90°) than horizontal (43.00 at 180°), which is with-the-rule astigmatism. The difference (1.25D) matches the refractive cylinder, indicating purely corneal astigmatism."
        },
            
        // New questions to add to quizData array
{
    question: "A patient has a prescription of +1.25 +2.50 x 30. What is this prescription in minus cylinder form?",
    options: [
        {text: "+3.75 -2.50 x 120", value: "a"},
        {text: "+1.25 -2.50 x 120", value: "b"},
        {text: "+3.75 -2.50 x 30", value: "c"},
        {text: "+3.75 +2.50 x 120", value: "d"}
    ],
    correctAnswer: "a",
    explanation: "To convert to minus cylinder: +1.25 + (+2.50) = +3.75 sphere, -2.50 cylinder, and the axis changes by 90° (30 + 90 = 120)."
},
{
    question: "Convert the following prescription to minus cylinder form: -2.00 +1.00 x 135",
    options: [
        {text: "-1.00 -1.00 x 45", value: "a"},
        {text: "-2.00 -1.00 x 45", value: "b"},
        {text: "-1.00 -1.00 x 135", value: "c"},
        {text: "-3.00 -1.00 x 45", value: "d"}
    ],
    correctAnswer: "a",
    explanation: "To convert to minus cylinder: -2.00 + (+1.00) = -1.00 sphere, -1.00 cylinder, and the axis changes by 90° (135 - 90 = 45)."
},
{
    question: "A patient has a spectacle prescription of -6.25 -1.75 x 90. What would be the compensated contact lens prescription, assuming a 12mm vertex distance?",
    options: [
        {text: "-6.25 -1.75 x 90 (no change needed)", value: "a"},
        {text: "-5.75 -1.50 x 90", value: "b"},
        {text: "-6.00 -1.50 x 90", value: "c"},
        {text: "-5.50 -1.75 x 90", value: "d"}
    ],
    correctAnswer: "b",
    explanation: "For -6.25 -1.75 x 90, both meridians exceed 4D: -6.25D at 180° and -8.00D at 90°. Using the rule of thumb, for around 6D compensate by 0.5D and for 8D compensate by 0.5D to 0.75D, resulting in approximately -5.75 -1.50 x 90."
},
{
    question: "A patient's spectacle prescription is -8.75D sphere. What would be the compensated contact lens power, assuming a 14mm vertex distance?",
    options: [
        {text: "-8.75D", value: "a"},
        {text: "-8.25D", value: "b"},
        {text: "-7.75D", value: "c"},
        {text: "-8.00D", value: "d"}
    ],
    correctAnswer: "c",
    explanation: "For a high minus prescription of -8.75D with a 14mm vertex distance, the rule of thumb suggests compensation of approximately 1.00D. Therefore, the compensated contact lens power would be -7.75D."
},
{
    question: "A patient has K readings of 42.50@180 / 44.00@90 and a refraction of -1.50 -1.50 x 180. What type of astigmatism does this patient have?",
    options: [
        {text: "With-the-rule corneal astigmatism", value: "a"},
        {text: "Against-the-rule corneal astigmatism", value: "b"},
        {text: "Oblique corneal astigmatism", value: "c"},
        {text: "Lenticular astigmatism", value: "d"}
    ],
    correctAnswer: "a",
    explanation: "The K readings show a steeper vertical meridian (44.00 at 90°) than horizontal (42.50 at 180°), which is with-the-rule astigmatism. The difference (1.50D) matches the refractive cylinder, indicating purely corneal astigmatism."
},
{
    question: "A patient has K readings of 45.00@15 / 43.50@105. What type of astigmatism does this patient have?",
    options: [
        {text: "With-the-rule corneal astigmatism", value: "a"},
        {text: "Against-the-rule corneal astigmatism", value: "b"},
        {text: "Oblique corneal astigmatism", value: "c"},
        {text: "No astigmatism", value: "d"}
    ],
    correctAnswer: "c",
    explanation: "The K readings show the steepest meridian at 15° which is neither within 30° of 90° (with-the-rule) nor within 30° of 180° (against-the-rule). This pattern indicates oblique corneal astigmatism."
},
{
    question: "You decide to fit a spherical GP lens 0.25D steeper than K for a patient with a compensated prescription of -2.25D. What should the final lens power be?",
    options: [
        {text: "-2.00D", value: "a"},
        {text: "-2.25D", value: "b"},
        {text: "-2.50D", value: "c"},
        {text: "-2.75D", value: "d"}
    ],
    correctAnswer: "c",
    explanation: "Using SAM (Steeper Add Minus): When fitting 0.25D steeper than K with -2.25D, add 0.25D of minus power: -2.25 - 0.25 = -2.50D."
},
{
    question: "You are fitting a GP lens 0.50D flatter than K. Your patient's compensated prescription is -4.75D. What should the final lens power be?",
    options: [
        {text: "-5.25D", value: "a"},
        {text: "-4.75D", value: "b"},
        {text: "-4.25D", value: "c"},
        {text: "-5.00D", value: "d"}
    ],
    correctAnswer: "c",
    explanation: "Using FAP (Flatter Add Plus): When fitting 0.50D flatter than K with -4.75D, add 0.50D of plus power: -4.75 + 0.50 = -4.25D."
},
{
    question: "A patient has K readings of 44.00@170 / 46.00@80 and a refraction of -2.50 -1.25 x 170. What type of lens would be most appropriate?",
    options: [
        {text: "Spherical soft lens", value: "a"},
        {text: "Toric soft lens", value: "b"},
        {text: "Spherical GP lens", value: "c"},
        {text: "Toric GP lens", value: "d"}
    ],
    correctAnswer: "c",
    explanation: "The patient has 2.00D of corneal astigmatism (44.00 to 46.00) but only 1.25D of refractive astigmatism at the same axis. A spherical GP lens would vault the cornea and mask the corneal astigmatism without needing a toric design."
},
{
    question: "A patient has a manifest refraction of -3.75 -2.25 x 45. The K readings are 43.00@135 / 45.25@45. What is the most appropriate type of contact lens?",
    options: [
        {text: "Spherical soft lens", value: "a"},
        {text: "Toric soft lens", value: "b"},
        {text: "Spherical GP lens", value: "c"},
        {text: "Toric GP lens", value: "d"}
    ],
    correctAnswer: "b",
    explanation: "The K readings show 2.25D of corneal astigmatism that matches the refractive cylinder amount. For a soft lens, all astigmatism must be corrected with a toric design when it's ≥0.75D, so a toric soft lens is required."
},
{
    question: "Convert the following spectacle prescription to contact lens prescription, assuming a 12mm vertex distance: -5.00 -1.00 x 90",
    options: [
        {text: "-5.00 -1.00 x 90", value: "a"},
        {text: "-4.75 -0.75 x 90", value: "b"},
        {text: "-4.50 -1.00 x 90", value: "c"},
        {text: "-4.75 -1.00 x 90", value: "d"}
    ],
    correctAnswer: "d",
    explanation: "For -5.00 -1.00 x 90, we need to check both meridians: At 180° is -5.00D (above 4D threshold), and at 90° is -6.00D. For the -5.00D meridian, approximate compensation would be 0.25D, resulting in -4.75D. For the -6.00D meridian, compensation would be about 0.25D to 0.50D, making it approximately -5.50D to -5.75D. This results in -4.75 -1.00 x 90."
},
{
    question: "A patient has K readings of 41.75@10 / 43.25@100 and a refraction of -1.00 -1.50 x 10. What type of astigmatism does this patient have?",
    options: [
        {text: "With-the-rule corneal astigmatism", value: "a"},
        {text: "Against-the-rule corneal astigmatism", value: "b"},
        {text: "Oblique corneal astigmatism", value: "c"},
        {text: "Both corneal and lenticular astigmatism", value: "d"}
    ],
    correctAnswer: "c",
    explanation: "The K readings show the steepest meridian at 100° and flattest at 10°. Since these are not within 30° of the principal meridians, this pattern indicates oblique corneal astigmatism. The K reading difference matches the refractive cylinder, indicating purely corneal astigmatism."
},
{
    question: "A patient has K readings of 42.00@180 / 43.00@90 and a refraction of -2.00 -2.00 x 180. What is the likely source of astigmatism?",
    options: [
        {text: "Purely corneal astigmatism", value: "a"},
        {text: "Purely lenticular astigmatism", value: "b"},
        {text: "Both corneal and lenticular astigmatism", value: "c"},
        {text: "No significant astigmatism", value: "d"}
    ],
    correctAnswer: "c",
    explanation: "The K readings show 1.00D of corneal astigmatism, but the refraction shows 2.00D of refractive astigmatism. This suggests the astigmatism is coming from both corneal (1.00D) and lenticular (1.00D) sources."
},
{
    question: "You are fitting a GP lens for a patient with K readings of 44.50@180 / 46.50@90. Their refraction is -3.00 -2.00 x 180. If you fit 0.75D steeper than K, what will be the final lens power?",
    options: [
        {text: "-3.00D", value: "a"},
        {text: "-3.75D", value: "b"},
        {text: "-2.25D", value: "c"},
        {text: "-2.50D", value: "d"}
    ],
    correctAnswer: "b",
    explanation: "Using SAM (Steeper Add Minus): When fitting 0.75D steeper than K with -3.00D, add 0.75D of minus power: -3.00 - 0.75 = -3.75D."
},
{
    question: "A patient has a spectacle Rx of +4.50 +2.00 x 75. What is the equivalent in minus cylinder form?",
    options: [
        {text: "+6.50 -2.00 x 165", value: "a"},
        {text: "+4.50 -2.00 x 165", value: "b"},
        {text: "+6.50 -2.00 x 75", value: "c"},
        {text: "+2.50 -2.00 x 165", value: "d"}
    ],
    correctAnswer: "a",
    explanation: "To convert to minus cylinder: +4.50 + (+2.00) = +6.50 sphere, -2.00 cylinder, and the axis changes by 90° (75 + 90 = 165)."
},
{
    question: "A patient has a spectacle prescription of +5.50 sphere. What would be the compensated contact lens power, assuming a 12mm vertex distance?",
    options: [
        {text: "+5.50D", value: "a"},
        {text: "+5.25D", value: "b"},
        {text: "+5.00D", value: "c"},
        {text: "+4.75D", value: "d"}
    ],
    correctAnswer: "b",
    explanation: "For a high plus prescription of +5.50D with a 12mm vertex distance, the rule of thumb suggests compensation of approximately 0.25D. Therefore, the compensated contact lens power would be +5.25D."
},
{
    question: "A patient has K readings of 42.00@45 / 43.50@135 and a refraction of -1.00 -1.50 x 45. Which statement is correct?",
    options: [
        {text: "The patient has with-the-rule corneal astigmatism", value: "a"},
        {text: "The patient has oblique corneal astigmatism", value: "b"},
        {text: "The patient has lenticular astigmatism", value: "c"},
        {text: "The patient has against-the-rule corneal astigmatism", value: "d"}
    ],
    correctAnswer: "b",
    explanation: "The K readings show the steepest meridian at 135° and flattest at 45°. Since these are not within 30° of 90° or 180°, this is oblique corneal astigmatism. The K reading difference matches the refractive cylinder, indicating purely corneal astigmatism."
},
{
    question: "A patient has K readings of 45.00@180 / 43.00@90. What type of astigmatism does this cornea exhibit?",
    options: [
        {text: "With-the-rule corneal astigmatism", value: "a"},
        {text: "Against-the-rule corneal astigmatism", value: "b"},
        {text: "Oblique corneal astigmatism", value: "c"},
        {text: "No corneal astigmatism", value: "d"}
    ],
    correctAnswer: "b",
    explanation: "The K readings show a steeper horizontal meridian (45.00 at 180°) than vertical (43.00 at 90°). When the horizontal meridian is steeper, this is against-the-rule astigmatism."
},
{
    question: "A patient has a refraction of -2.00 -1.00 x 180 and K readings of 43.00@180 / 44.00@90. If you are fitting a GP lens 0.50D flatter than K, what would be the final lens power?",
    options: [
        {text: "-2.00D", value: "a"},
        {text: "-1.50D", value: "b"},
        {text: "-2.50D", value: "c"},
        {text: "-3.00D", value: "d"}
    ],
    correctAnswer: "b",
    explanation: "Using FAP (Flatter Add Plus): When fitting 0.50D flatter than K with -2.00D, add 0.50D of plus power: -2.00 + 0.50 = -1.50D."
}// ADD MORE QUIZ QUESTIONS HERE
                
    ];

    // Navigation Logic
    const navButtons = document.querySelectorAll('.nav-btn');
    const sections = document.querySelectorAll('.section');
    
    navButtons.forEach(button => {
        button.addEventListener('click', () => {
            const targetId = button.id.replace('btn-', 'section-');
            
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(targetId).classList.add('active');
            
            navButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
        });
    });
    
    // Quiz Logic
    let currentQuestion = 0;
    let score = 0;
    let answered = Array(quizData.length).fill(false);
    
    // Generate quiz questions dynamically
    function generateQuizQuestions() {
        const quizContainer = document.getElementById('quiz-container');
        quizContainer.innerHTML = '';
        
        quizData.forEach((data, index) => {
            const questionDiv = document.createElement('div');
            questionDiv.id = `question-${index+1}`;
            questionDiv.className = 'question';
            if (index === 0) questionDiv.classList.add('active');
            
            let optionsHTML = '';
            data.options.forEach(option => {
                optionsHTML += `<div class="option" data-value="${option.value}">${option.text}</div>`;
            });
            
            questionDiv.innerHTML = `
                <h3>Question ${index+1}</h3>
                <p>${data.question}</p>
                <div class="options">${optionsHTML}</div>
                <div id="feedback-${index+1}" class="feedback"></div>
            `;
            
            quizContainer.appendChild(questionDiv);
        });
        
        // Add event listeners to options
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', () => {
                if (answered[currentQuestion]) return;
                
                document.querySelectorAll(`#question-${currentQuestion+1} .option`).forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
            });
        });
        
        // Update total questions display
        document.getElementById('total-questions').textContent = quizData.length;
    }
    
    function updateQuestion() {
        document.querySelectorAll('.question').forEach((q, index) => {
            q.classList.remove('active');
            if (index === currentQuestion) q.classList.add('active');
        });
        
        document.getElementById('quiz-progress').style.width = `${(currentQuestion + 1) / quizData.length * 100}%`;
        document.getElementById('score-display').textContent = `Question ${currentQuestion + 1} of ${quizData.length}`;
        
        document.getElementById('prev-btn').disabled = currentQuestion === 0;
        document.getElementById('next-btn').disabled = currentQuestion === quizData.length - 1;
        
        if (answered[currentQuestion]) {
            document.getElementById('check-btn').disabled = true;
            document.getElementById('check-btn').textContent = 'Answered';
        } else {
            document.getElementById('check-btn').disabled = false;
            document.getElementById('check-btn').textContent = 'Check Answer';
        }
    }
    
    function checkAnswer() {
        const questionNum = currentQuestion + 1;
        const selectedOption = document.querySelector(`#question-${questionNum} .option.selected`);
        
        if (!selectedOption) {
            alert('Please select an answer before checking.');
            return;
        }
        
        const selectedValue = selectedOption.getAttribute('data-value');
        const feedback = document.getElementById(`feedback-${questionNum}`);
        
        if (selectedValue === quizData[currentQuestion].correctAnswer) {
            selectedOption.classList.add('correct');
            feedback.textContent = `Correct! ${quizData[currentQuestion].explanation}`;
            feedback.classList.add('correct');
            score++;
        } else {
            selectedOption.classList.add('incorrect');
            const correctOption = document.querySelector(`#question-${questionNum} .option[data-value="${quizData[currentQuestion].correctAnswer}"]`);
            correctOption.classList.add('correct');
            feedback.textContent = `Incorrect. ${quizData[currentQuestion].explanation}`;
            feedback.classList.add('incorrect');
        }
        
        feedback.style.display = 'block';
        document.getElementById('check-btn').disabled = true;
        document.getElementById('check-btn').textContent = 'Answered';
        answered[currentQuestion] = true;
        
        if (currentQuestion < quizData.length - 1) {
            document.getElementById('next-btn').disabled = false;
        }
        
        if (answered.every(a => a)) {
            showResults();
        }
    
    }
    
    function showResults() {
        document.getElementById('quiz-container').style.display = 'none';
        document.getElementById('quiz-results').style.display = 'block';
        document.getElementById('final-score').textContent = score;
        
        let feedbackMessage = '';
        if (score === quizData.length) {
            feedbackMessage = 'Perfect! You\'re ready for the NCLE exam!';
        } else if (score >= quizData.length * 0.8) {
            feedbackMessage = 'Great job! You have a strong understanding of contact lens mathematics.';
        } else if (score >= quizData.length * 0.6) {
            feedbackMessage = 'Good effort! Review the areas you missed and try again.';
        } else {
            feedbackMessage = 'You might need more practice. Review the learning materials and try again.';
        }
        
        document.getElementById('quiz-feedback').textContent = feedbackMessage;
    }
    
    function resetQuiz() {
        currentQuestion = 0;
        score = 0;
        answered = Array(quizData.length).fill(false);
        
        document.querySelectorAll('.option').forEach(opt => {
            opt.classList.remove('selected', 'correct', 'incorrect');
        });
        
        document.querySelectorAll('.feedback').forEach(feedback => {
            feedback.textContent = '';
            feedback.className = 'feedback';
            feedback.style.display = 'none';
        });
        
        document.getElementById('quiz-container').style.display = 'block';
        document.getElementById('quiz-results').style.display = 'none';
        
        updateQuestion();
    }
    
    // Initialize quiz
    generateQuizQuestions();
    updateQuestion();
    
    // Event listeners
    document.getElementById('prev-btn').addEventListener('click', () => {
        if (currentQuestion > 0) {
            currentQuestion--;
            updateQuestion();
        }
    });
    
    document.getElementById('next-btn').addEventListener('click', () => {
        if (currentQuestion < quizData.length - 1) {
            currentQuestion++;
            updateQuestion();
        }
    });
    
    document.getElementById('check-btn').addEventListener('click', checkAnswer);
    document.getElementById('retry-btn').addEventListener('click', resetQuiz);
    </script>
</body>
</html>
